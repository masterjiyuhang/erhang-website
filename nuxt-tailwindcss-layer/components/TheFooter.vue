<script setup lang="ts">
  import redbook from '@/assets/images/footer/icon_redbook@2x.png'
  import tiktok from '@/assets/images/footer/icon_tiktok@2x.png'
  import wechat from '@/assets/images/footer/icon_wechat@2x.png'
  import weibo from '@/assets/images/footer/icon_weibo@2x.png'
  import qr_gzh from '@/assets/images/footer/img_qr_gzh@2x.png'
  import qr_weibo from '@/assets/images/footer/img_qr_weibo@2x.png'
  import qr_tiktok from '@/assets/images/footer/img_qr_tiktok@2x.png'
  import qr_xhs from '@/assets/images/footer/img_qr_xhs@2x.png'
  import img_footer_logo from '@/assets/images/footer/img_footer_logo.png'

  const QR_LIST = [
    {
      title: 'å…¬ä¼—å·',
      icon: wechat,
      qr: qr_gzh,
    },
    {
      title: 'å¾®åš',
      icon: weibo,
      qr: qr_weibo,
    },
    {
      title: 'æŠ–éŸ³',
      icon: tiktok,
      qr: qr_tiktok,
    },
    {
      title: 'å°çº¢ä¹¦',
      icon: redbook,
      qr: qr_xhs,
    },
  ]

  const config = useRuntimeConfig()

  const FOOTER_LIST = [
    {
      name: 'å•†æœºé“¾æ¥',
      children: [
        {
          name: 'è¿ä»·æ–¹æ¡ˆ',
          appId: 'RATE',
          targetPath: '/',
        },
        {
          name: 'å…¬å¸åå½•',
          appId: 'SHOP',
          targetPath: '/',
        },
        {
          name: 'è¯¢ç›˜',
          appId: 'TPS',
          targetPath: '/',
        },
        {
          name: 'æ‰¾ä»£ç†',
          appId: 'TPS',
          targetPath: '/findAgent',
        },
        {
          name: 'è´§ä»£åœˆ',
          href: 'https://marketing.jctrans.com/promotion/hdq/pc/index.html#/',
          type: 2,
        },
        {
          name: 'åŠ å…¥ä¼šå‘˜',
          type: 3,
          code: config.public.constant.OPEN_JOIN_US,
        },
      ],
    },
    {
      name: 'ä¼šå‘˜è”ç›Ÿ',
      children: [
        {
          name: 'ä¼šå‘˜ä»‹ç»',
          appId: 'ERA',
          targetPath: '/cn/membership/introduction',
        },
        {
          name: 'ä¼šå‘˜æƒç›Š',
          appId: 'ERA',
          targetPath: '/cn/membership/benefits',
        },
        {
          name: 'åŠ å…¥ä¼šå‘˜',
          type: 3,
          code: config.public.constant.OPEN_JOIN_US,
        },
      ],
    },
    {
      name: 'å…¨çƒä¼šè®®',
      children: [
        {
          title: 'Global Conference',
          name: 'äº¤æ´½ä¼š',
          appId: 'EVT',
          targetPath: '',
        },
        {
          title: 'Exhibiton',
          name: 'åšè§ˆä¼š',
          appId: 'EVT',
          targetPath: '/coExhibiton',
        },
        {
          title: 'Industry Event',
          name: 'è¡Œä¸šæ´»åŠ¨',
          appId: 'EVT',
          targetPath: '/industryEvent',
        },
      ],
    },
    {
      name: 'é‡‘èæ”¯ä»˜',
      children: [
        {
          title: 'Settlement between members without any fees',
          name: 'å…¨çƒä¼šå‘˜é—´å…è´¹ç»“ç®—',
          appId: 'FIN',
          targetPath: '/JCPAY?redirectFrom=ZWZ',
        },
        {
          title: 'Collect money from your Chinese partner cheap and fast',
          name: 'è·¨å¢ƒæ”¶ä»˜æ±‡å®‰å…¨çœé’±',
          appId: 'FIN',
          targetPath: '/TCS?redirectFrom=ZWZ',
        },
        {
          title: 'å›½å†…åœ¨çº¿æ”¶ä»˜æµ·è¿è´¹',
          name: 'å›½å†…åœ¨çº¿æ”¶ä»˜æµ·è¿è´¹',
          appId: 'FIN',
          targetPath: '/USDExpress?redirectFrom=ZWZ',
        },
      ],
    },
    {
      name: 'å·¥å…·',
      children: [
        {
          name: 'è´§è¿é™©',
          appId: 'JHB',
          targetPath: '/products/cargoInsurance',
        },
        {
          name: 'è´§ä»£è´£ä»»é™©',
          appId: 'JHB',
          targetPath: '/products/liabilityInsurance',
        },
        {
          name: 'èˆ¹æœŸ',
          appId: 'ERA',
          targetPath: '/tools/Container/SchedulePlan',
        },
        {
          name: 'å…¨é“¾è·¯è·Ÿè¸ª',
          appId: 'ERA',
          targetPath: '/tools/Container/ContainerTracking',
        },
        {
          name: 'AMS',
          appId: 'DDC',
          targetPath: '/?redirectFrom=ERA',
        },
        { name: 'ISF', appId: 'DDC', targetPath: '/?redirectFrom=ERA' },
        { name: 'ACL', appId: 'DDC', targetPath: '/?redirectFrom=ERA' },
        { name: 'AFR', appId: 'DDC', targetPath: '/?redirectFrom=ERA' },
        { name: 'ä¸Šæµ·é¢„é…', appId: 'DDC', targetPath: '/?redirectFrom=ERA' },
        { name: 'é’å²›é¢„é…', appId: 'DDC', targetPath: '/?redirectFrom=ERA' },
        { name: 'æ·±åœ³é¢„é…', appId: 'DDC', targetPath: '/?redirectFrom=ERA' },
        { name: 'å—æ²™é¢„é…', appId: 'DDC', targetPath: '/?redirectFrom=ERA' },
        {
          name: 'åœ¨çº¿æŠ¥å…³',
          appId: 'JCB',
          targetPath: '/mftCustoms',
        },
        { name: 'FMCèµ„è´¨æœåŠ¡', appId: 'DDC', targetPath: '/fmcQualification' },
      ],
    },
    {
      name: 'å…³äºæˆ‘ä»¬',
      children: [
        {
          name: 'å…³äºæˆ‘ä»¬',
          appId: 'ERA',
          targetPath: '/cn/aboutus',
        },
        { name: 'æ–°é—»èµ„è®¯', href: 'http://info.jctrans.com/', type: 2 },
        {
          name: 'æˆåŠŸæ¡ˆä¾‹',
          href: 'https://marketing.jctrans.com/case/landing/pc/#/',
          type: 2,
        },
        { name: 'å®˜æ–¹å®¢æœ', code: 'IM', type: 3 },
        {
          name: 'æˆ‘çš„å·¥ä½œå°',
          appId: 'JCB',
          targetPath: '/',
        },
        { name: 'ç™»å½•', code: 'login', type: 3 },
        { name: 'æ³¨å†Œ', code: 'register', type: 3 },
      ],
    },
  ]

  const app = useNuxtApp()

  async function handleClick(item) {
    console.log('ğŸš€ ~ file: TheFooter.vue:155 ~ handleClick ~ item:', item)
    if (item.type === 3) {
      console.log(
        'ğŸš€ ~ file: TheFooter.vue:211 ~ handleClick ~ item.type:',
        item.type,
      )
      if (item.code === 'login') {
        go2LoginPage()
      }
      if (item.code === 'register') {
        openByLink('https://passport.jctrans.com/register?appId=ZWZ')
      }
      if (item.code === 'IM') {
        try {
          await app.$JCIM.openIM()
        } catch (error) {
          ElMessage.error('IMåŠ è½½ä¸­ï¼Œè¯·ç¨åå†è¯•')
        }
      }
      if (item.code === config.public.constant.OPEN_JOIN_US) {
        app.$mitt.emit(config.public.constant.OPEN_JOIN_US, {})
      }
    } else if (item.type === 2) {
      openByLink(item.href)
    } else {
      openPageByAppId(item.appId, item.targetPath)
    }
  }
</script>

<template>
  <footer class="pb-24 pt-12 bg-white">
    <div class="container">
      <!--  eslint-disable-next-line vue/html-self-closing -->
      <img :src="img_footer_logo" class="w-[212px] h-[34px]" />
      <div class="mt-11 flex">
        <div class="flex flex-col w-[276px]">
          <div class="grid grid-cols-2 gap-4">
            <div
              v-for="item in QR_LIST"
              :key="item.title"
              class="flex flex-col items-center"
            >
              <img :src="item.qr" class="w-[130px] h-[130px]" />
              <div class="flex items-center mt-1 text-[#000] text-sm">
                <img :src="item.icon" class="size-4 mr-1" /> {{ item.title }}
              </div>
            </div>
          </div>

          <div
            class="bg-primary/10 text-center text-primary text-sm py-1.5 mt-4"
          >
            å…³æ³¨JCtransæ°è¥¿åœˆ äº†è§£è¡Œä¸šæ–°åŠ¨æ€
          </div>
        </div>

        <div class="flex-1 ml-14">
          <div class="flex space-x-11">
            <div v-for="item in FOOTER_LIST" :key="item.name">
              <div class="flex flex-col space-y-3">
                <div
                  class="text-paper font-medium leading-[22px] text-base pb-1"
                >
                  {{ item.name }}
                </div>
                <div
                  v-for="aa in item.children"
                  :key="aa.name"
                  :class="[
                    'flex items-center leading-5 text-[#727377] text-sm',
                    'hover:text-primary',
                    'sub-title',
                  ]"
                  @click="handleClick(aa)"
                >
                  {{ aa.name }}
                  <NuxtImg
                    src="/icons/icon_more_slope_basic.svg"
                    width="16"
                    height="16"
                    alt="More"
                    loading="lazy"
                    class="ml-1"
                    :class="['sub-title-icon']"
                  />
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <!-- <div class="container mx-auto px-8">
      <div class="flex flex-wrap relative">
        <div
          class="mx-auto flex flex-col flex-wrap items-center px-8 py-4 md:flex-col md:flex-nowrap -mt-4 lg:items-start lg:w-1/3"
        >
          <TheLogo />

          <LangSwitcher />

          <div class="my-6 text-center flex flex-col">
            <NuxtLinkLocale to="/">+1 234 567-890</NuxtLinkLocale>
            <NuxtLinkLocale to="/">hello@fantico.com</NuxtLinkLocale>
          </div>
        </div>

        <div class="flex flex-col sm:w-full md:items-end">
          <div class="mb-4 opacity-25" />
          <p class="py-1 text-sm sm:text-center">
            &copy; 2002 - 2021. All Rights Reserved - ErHang is the King
          </p>
        </div>
      </div>
    </div> -->
  </footer>
</template>

<style scoped>
  .sub-title {
    cursor: pointer;
    height: 20px;
    /* font-family: Alibaba PuHuiTi; */
    font-weight: 400;
    font-size: 14px;
    line-height: 20px;
    text-align: left;

    .sub-title-icon {
      visibility: hidden;
    }

    &:hover .sub-title-icon {
      visibility: visible;
    }
  }
</style>
